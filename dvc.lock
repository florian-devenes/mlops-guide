schema: '2.0'
stages:
  prepare:
    cmd: python3.12 src/prepare.py data/raw data/prepared
    deps:
    - path: data/raw
      hash: md5
      md5: c8c6cb35d62cd00d10480831d53c5bb3.dir
      size: 9008565
      nfiles: 1641
    - path: src/prepare.py
      hash: md5
      md5: d4f3312976ced5ace2cdab70239d544a
      size: 2514
    - path: src/utils/seed.py
      hash: md5
      md5: 3a792a2e3aece6c04c2756bc133a5cd1
      size: 438
    params:
      params.yaml:
        prepare:
          seed: 77
          split: 0.2
          image_size:
          - 32
          - 32
          grayscale: true
    outs:
    - path: data/prepared
      hash: md5
      md5: 32f596507cb30f23433eeaaf972f498f.dir
      size: 6754857
      nfiles: 8
  train:
    cmd: python3.12 src/train.py data/prepared model
    deps:
    - path: data/prepared
      hash: md5
      md5: 32f596507cb30f23433eeaaf972f498f.dir
      size: 6754857
      nfiles: 8
    - path: src/train.py
      hash: md5
      md5: d92a4ce5e02e8a08983271c0e614831b
      size: 4086
    - path: src/utils/seed.py
      hash: md5
      md5: 3a792a2e3aece6c04c2756bc133a5cd1
      size: 438
    params:
      params.yaml:
        train:
          seed: 77
          lr: 0.001
          epochs: 20
          conv_size: 64
          dense_size: 128
          output_classes: 11
    outs:
    - path: model
      hash: md5
      md5: 004a2873a41d6c4e86f5fa11d86ea9d8.dir
      size: 8252928
      nfiles: 2
  evaluate:
    cmd: python3.12 src/evaluate.py model data/prepared
    deps:
    - path: model
      hash: md5
      md5: 004a2873a41d6c4e86f5fa11d86ea9d8.dir
      size: 8252928
      nfiles: 2
    - path: src/evaluate.py
      hash: md5
      md5: 7b1258254ef48a19a981bec536469e55
      size: 5581
    outs:
    - path: evaluation/metrics.json
      hash: md5
      md5: 67cf2053fe1abd4fc8980163beb4169e
      size: 64
    - path: evaluation/plots/confusion_matrix.png
      hash: md5
      md5: 49dec4336d77b04344c9bc1a4a294cda
      size: 44438
    - path: evaluation/plots/pred_preview.png
      hash: md5
      md5: 8b2b1dd06b96f8af3e2f4bd957b7442c
      size: 44458
    - path: evaluation/plots/training_history.png
      hash: md5
      md5: dd597c8c45af3e9b2f5a875dfff5adfd
      size: 39148
